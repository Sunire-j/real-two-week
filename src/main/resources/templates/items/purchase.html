<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
</head>
<body>
<div th:replace="fragments/header::header"></div>
<div class="container">
    <div class="basket-top">
        <h2 style="font-weight: bold">주문/결제</h2>
        <hr/>
        <img src="https://malldemo01.swm.whoismall.com/skin/f_simple/images/shop/order_step02_topimg.gif">
    </div>

    <!--    아래쪽 표는 장바구니통해서 결제하면 여러개 다 나오긴하겠지만, 바로결제는 리스트 공간 하나만 써서 해줘야함-->
    <div class="item-list">
        <h5 style="font-weight: bold">주문 리스트</h5>
        <table class="table table-hover">
            <thead>
            <tr>
                <th scope="col" style="width: 100px">상품이미지</th>
                <th style="width: 250px" scope="col">상품정보</th>
                <th style="width: 70px" scope="col">수량</th>
                <th scope="col">상품금액</th>
                <th scope="col">합계</th>
                <th scope="col">배송비</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="list ,stat : ${blist}">
                <td style="width: 100px">
                    <img style="width: 100px" th:src="${list.img}" th:alt="${list.items_id}">
                </td>
                <td><a style="color: black" th:href="|/goods/view?no=${list.items_id}|" th:text="${list.name}"></a></td>
                <td th:text="${list.amount}"></td>
                <td th:text="${#numbers.formatInteger(list.price,3,'COMMA')+'원'}">상품금액</td>
                <td th:text="${#numbers.formatInteger(list.price * list.amount,3,'COMMA')+'원'}">합계</td>
                <td th:if="${stat.last}" th:rowspan="${#lists.size(blist)}"
                    th:text="${#numbers.formatInteger(maxDelivery,3,'COMMA')+'원'}">배송비
                </td>
            </tr>
            </tbody>
        </table>

        <div class="order-container d-flex">
            <div class="left">
                <div>주문자명</div>
                <div>연락처</div>
                <div>이메일</div>
            </div>
            <div class="right">
                <div><input type="text" name="order-username" value="고길동"></div>
                <div class="d-flex">
                    <select name="tel1">
                        <option value="none">선택</option>
                        <option value="010">010</option>
                        <option value="011">011</option>
                        <option value="016">016</option>
                        <option value="017">017</option>
                        <option value="018">018</option>
                        <option value="019">019</option>
                    </select>
                    &nbsp;-&nbsp;
                    <input type="text" name="tel2" value="1234">
                    <input type="text" name="tel3" value="5678">
                </div>
            </div>
        </div>

        <div class="place-container">

        </div>

        <div class="method-container">

        </div>

        <div class="final-price d-flex">
            <div style="width: 650px; display: flex; align-items: center; font-size: 24px">총 결제 금액</div>
            <div class="price-container-title">
                <div>총 상품 금액</div>
                <div>총 배송비</div>
                <div>총 결제금액</div>
            </div>
            <div class="price-container">
                <div th:text="${#numbers.formatInteger(sumPrice,3,'COMMA')+'원'}"></div>
                <div th:text="${#numbers.formatInteger(maxDelivery,3,'COMMA')+'원'}"></div>
                <div id="totalPrice" th:text="${#numbers.formatInteger(sumPrice+maxDelivery,3,'COMMA')+'원'}"></div>
            </div>
        </div>

        <div th:if="${blist.size()>0}" class="button-container d-flex" style="width: 100%">
            <input style="margin: 0 auto; margin-top: 20px;" type="button" value="결제하기" class="btn btn-primary">
        </div>


    </div>
</div>
<div th:replace="fragments/footer::footer"></div>
</body>
</html>